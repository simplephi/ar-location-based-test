<!DOCTYPE html>
<html>
	<head>
		<script src="https://aframe.io/releases/1.3.0/aframe.min.js"></script>
		<!-- we import arjs version without NFT but with marker + location based support -->
		<script src="https://raw.githack.com/AR-js-org/AR.js/dev/aframe/build/aframe-ar.js"></script>
		<script src="https://raw.githubusercontent.com/donmccurdy/aframe-extras/master/dist/aframe-extras.loaders.min.js"></script>
		<script>
		  AFRAME.registerComponent("foo", {
			init: function() {
			  this.el.addEventListener("model-loaded", e => {
				console.log(e);
				let model = this.el.getObject3D("mesh");
				model.traverse(function(node) {
				  if (!node.material) return;

				  var tmp = node.material
				  node.material = new THREE.MeshStandardMaterial({
					skinning: true,
					map: node.material.map
				  });
				  node.material.needsUpdate = true;
				  tmp.dispose()
				});
			  });
			}
		  });
		</script>
	</head>
    <body style="margin : 0px; overflow: hidden;">
	
		<a-scene embedded arjs renderer="colorManagement: true; physicallyCorrectLights: true;">
		
			<a-entity light="type: ambient; intensity: 10.2"></a-entity>
			<a-assets>
				<!-- Blender adjust -->
				<!-- a-asset-item id="torus" src="../image-tracking/nft/usdz/torus_gold.gltf"></a-asset-item -->
				<!-- original one -->
				<a-asset-item id="torus" src="https://cdn.glitch.com/e7cc59d5-7980-424c-8948-6b90537372f9%2Fcow02.glb?v=1595235082078"></a-asset-item>
			</a-assets>
			
		
			<a-marker type="pattern" url="https://raw.githubusercontent.com/simplephi/ar-location-based-test/main/aframe/examples/assets/gold.patt">
			<!-- a-marker preset="hiro" -->
				<a-entity
					position="0 0 0"
					rotation="0 0 0"
					scale="0.05 0.05 0.05"
					animation="property: rotation; to: 0 360 0; loop: true; dur: 20000"
					gltf-model="#torus"
					foo
				></a-entity>
				
				<a-text color="black" position="-2.5 0.1 -5" value="overriden material"></a-text>
				<a-entity
					gltf-model="#torus"
					scale="100 100 100"
					rotation="0 0 0"
					animation="property: rotation; to: 0 360 0; loop: true; dur: 20000"
					position="2 1 -5"
				  >
				  </a-entity>
				  <a-text color="black" position="2 0.1 -5" value="original material"></a-text>

    
			</a-marker>
			<a-entity camera></a-entity>
        </a-scene>
       
    </body>
	
</html>
